# Проектирование → Реализация

## 1. Проектирование

### 1.1 Анализ требований
**Определил ключевые сущности**:
  - Запись (`Appointment`)
  - Врач (`Doctor`)
  - Пациент (`Patient`)

### 1.2 Архитектурные решения
**Стек технологий**:
- В качестве пакетного менеджера было принято решение выбрать Poetry - быстро, надежно. Можно было и uv, но неудобно с ним разрабатывать
- Выбран фреймворк FastAPI за счет более быстрой асинхронной работы по сравнению с Flask, удобной документации в Swagger, применения инъекции зависимостей и тд.
- В качестве БД был выбран PostgreSQL по причине наличия опыта работы с ним. В БД было принято решение создать с помощью миграции одну таблицу, так как мы реализуем микросервисную архитектуру, следовательно должно быть разделение данных врачей и пациентов. Реализовывать всю базу и дополнительные сервисы выходит за рамки задания.
- По заданию было 2 API-endpoints, было принято решение добавить еще одну дополнительную (хотя расширить функционал микросервиса есть куда); конечный список ручек:
```
POST /appointments   # Создание записи
GET /appointments/available/{doctor_id}/{date}  # Свободные слоты
GET /appointments/{id}  # Просмотр записи
```

## 2. Реализация
### Поэтапное внедрение
1. Настройка окружения, поднятие тестовой БД
2. Написание конфига для микросервиса
3. Добавление моделей Pydantic (валидация входных/выходных данных)
4. Реализация сервисного слоя (бизнес логика) + параллельно реализация слоя API
5. Реализация кастомных ошибок и `error handlers`
6. Добавил Админ-панель
7. Проверка и исправление кода с помощью `black`, `flake8`, `isort`
8. Локальное тестирование с помощью `pytest`
9. Работа с `Docker`
10. Реализация `Makefile`
11. Настройка CI процесса с помощью Github actions: этапы lint -> test